<!DOCTYPE html>
<html lang="en-us"><head><meta charset="utf-8">
<meta http-equiv="content-type" content="text/html">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title itemprop="name">Contributing to Godot - Visual Shaders Nodes | MyWriteUP</title>
<meta property="og:title" content="Contributing to Godot - Visual Shaders Nodes | MyWriteUP" />
<meta name="twitter:title" content="Contributing to Godot - Visual Shaders Nodes | MyWriteUP" />
<meta itemprop="name" content="Contributing to Godot - Visual Shaders Nodes | MyWriteUP" />
<meta name="application-name" content="Contributing to Godot - Visual Shaders Nodes | MyWriteUP" />
<meta property="og:site_name" content="MyBlogWriteUP" />

<meta name="description" content="Minimal Hugo blog theme with light and dark mode support">
<meta itemprop="description" content="Minimal Hugo blog theme with light and dark mode support" />
<meta property="og:description" content="Minimal Hugo blog theme with light and dark mode support" />
<meta name="twitter:description" content="Minimal Hugo blog theme with light and dark mode support" />

<meta property="og:locale" content="en-us" />
<meta name="language" content="en-us" />



  <meta itemprop="image" content="https://flagctfj0rik.github.io" />
  <meta property="og:image" content="https://flagctfj0rik.github.io" />
  <meta name="twitter:image" content="https://flagctfj0rik.github.io" />
  <meta name="twitter:image:src" content="https://flagctfj0rik.github.io" />




    
    
    
    

    <meta property="og:type" content="article" />
    <meta property="og:article:published_time" content=2023-04-22T00:00:00Z />
    <meta property="article:published_time" content=2023-04-22T00:00:00Z />

    

    

    <script defer type="application/ld+json">
    {
        "@context": "http://schema.org",
        "@type": "Article",
        "headline": "Contributing to Godot - Visual Shaders Nodes",
        "author": {
        "@type": "Person",
        "name": ""
        },
        "datePublished": "2023-04-22",
        "description": "",
        "wordCount":  2678 ,
        "mainEntityOfPage": "True",
        "dateModified": "2023-04-22",
        "image": {
        "@type": "imageObject",
        "url": ""
        },
        "publisher": {
        "@type": "Organization",
        "name": "MyWriteUP"
        }
    }
    </script>


<meta name="generator" content="Hugo 0.111.3">

    

    <link rel="canonical" href="https://flagctfj0rik.github.io/posts/contributing-to-godot-visual-shader-nodes/">
    <link href="/style.min.e8353c8bf6aa84457d3c7f65980d94548f249c91e6b37b15b9f1c7e13ceed431.css" rel="stylesheet">
    <link href="/code-highlight.min.706d31975fec544a864cb7f0d847a73ea55ca1df91bf495fd12a177138d807cf.css" rel="stylesheet">

    
    <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
    <link rel="shortcut icon" href="/favicon.ico">




<link rel="manifest" href="https://flagctfj0rik.github.io/site.webmanifest">

<meta name="msapplication-config" content="/browserconfig.xml">
<meta name="msapplication-TileColor" content="#2d89ef">
<meta name="theme-color" content="#434648">

    
    <link rel="icon" type="image/svg+xml" href="https://flagctfj0rik.github.io/icons/favicon.svg">

    
    </head>
<body data-theme = "dark" class="notransition">
<script src="/js/themeLoader.min.3c3396ae9effcbd02e7064baa7b435ffe6560bcd7fec0b428a470d3a128f2220.js"></script>
<div class="navbar" role="navigation">
    <nav class="menu" aria-label="Main Navigation">
        <a href="https://flagctfj0rik.github.io/" class="logo">
            <svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" 
viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" 
stroke-linejoin="round" class="feather feather-home">
<title>Home</title>
<path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
<polyline points="9 22 9 12 15 12 15 22"></polyline>
</svg>
        </a>
        <input type="checkbox" id="menu-trigger" class="menu-trigger" />
        <label for="menu-trigger">
            <span class="menu-icon">
                <svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" stroke="currentColor" fill="none" viewBox="0 0 14 14"><title>Menu</title><path stroke-linecap="round" stroke-linejoin="round" d="M10.595 7L3.40726 7"></path><path stroke-linecap="round" stroke-linejoin="round" d="M10.5096 3.51488L3.49301 3.51488"></path><path stroke-linecap="round" stroke-linejoin="round" d="M10.5096 10.4851H3.49301"></path><path stroke-linecap="round" stroke-linejoin="round" d="M0.5 12.5V1.5C0.5 0.947715 0.947715 0.5 1.5 0.5H12.5C13.0523 0.5 13.5 0.947715 13.5 1.5V12.5C13.5 13.0523 13.0523 13.5 12.5 13.5H1.5C0.947715 13.5 0.5 13.0523 0.5 12.5Z"></path></svg>
            </span>
        </label>

        <div class="trigger">
            <ul class="trigger-container">
                
                
                <li>
                    <a class="menu-link " href="/">
                        Home
                    </a>
                    
                </li>
                
                <li>
                    <a class="menu-link active" href="/posts/">
                        Posts
                    </a>
                    
                </li>
                
                <li>
                    <a class="menu-link " href="/pages/about/">
                        About
                    </a>
                    
                </li>
                
                <li class="menu-separator">
                    <span>|</span>
                </li>
            </ul>
            <a id="mode" href="#">
                <svg xmlns="http://www.w3.org/2000/svg" class="mode-sunny" width="21" height="21" viewBox="0 0 14 14" stroke-width="1">
<title>LIGHT</title><g><circle cx="7" cy="7" r="2.5" fill="none" stroke-linecap="round" stroke-linejoin="round"></circle><line x1="7" y1="0.5" x2="7" y2="2.5" fill="none" stroke-linecap="round" stroke-linejoin="round"></line><line x1="2.4" y1="2.4" x2="3.82" y2="3.82" fill="none" stroke-linecap="round" stroke-linejoin="round"></line><line x1="0.5" y1="7" x2="2.5" y2="7" fill="none" stroke-linecap="round" stroke-linejoin="round"></line><line x1="2.4" y1="11.6" x2="3.82" y2="10.18" fill="none" stroke-linecap="round" stroke-linejoin="round"></line><line x1="7" y1="13.5" x2="7" y2="11.5" fill="none" stroke-linecap="round" stroke-linejoin="round"></line><line x1="11.6" y1="11.6" x2="10.18" y2="10.18" fill="none" stroke-linecap="round" stroke-linejoin="round"></line><line x1="13.5" y1="7" x2="11.5" y2="7" fill="none" stroke-linecap="round" stroke-linejoin="round"></line><line x1="11.6" y1="2.4" x2="10.18" y2="3.82" fill="none" stroke-linecap="round" stroke-linejoin="round"></line></g></svg>
                <svg xmlns="http://www.w3.org/2000/svg" class="mode-moon" width="21" height="21" viewBox="0 0 14 14" stroke-width="1">
<title>DARK</title><g><circle cx="7" cy="7" r="2.5" fill="none" stroke-linecap="round" stroke-linejoin="round"></circle><line x1="7" y1="0.5" x2="7" y2="2.5" fill="none" stroke-linecap="round" stroke-linejoin="round"></line><line x1="2.4" y1="2.4" x2="3.82" y2="3.82" fill="none" stroke-linecap="round" stroke-linejoin="round"></line><line x1="0.5" y1="7" x2="2.5" y2="7" fill="none" stroke-linecap="round" stroke-linejoin="round"></line><line x1="2.4" y1="11.6" x2="3.82" y2="10.18" fill="none" stroke-linecap="round" stroke-linejoin="round"></line><line x1="7" y1="13.5" x2="7" y2="11.5" fill="none" stroke-linecap="round" stroke-linejoin="round"></line><line x1="11.6" y1="11.6" x2="10.18" y2="10.18" fill="none" stroke-linecap="round" stroke-linejoin="round"></line><line x1="13.5" y1="7" x2="11.5" y2="7" fill="none" stroke-linecap="round" stroke-linejoin="round"></line><line x1="11.6" y1="2.4" x2="10.18" y2="3.82" fill="none" stroke-linecap="round" stroke-linejoin="round"></line></g></svg>
            </a>
        </div>
    </nav>
</div>

<div class="wrapper post">
    <main class="page-content" aria-label="Content">
        <article>
            <header class="header">
                <h1 class="header-title">Contributing to Godot - Visual Shaders Nodes</h1>
                
                <div class="post-meta">
                    <time datetime="2023-04-22T00:00:00&#43;00:00" itemprop="datePublished"> 22 Apr 2023 </time>
                </div>
            </header>
            <details class="toc">
                <summary><b>Table of Contents</b></summary>
                <nav id="TableOfContents">
  <ul>
    <li><a href="#introduction">Introduction</a></li>
    <li><a href="#the-structure-of-visual-shaders-nodes">The structure of Visual Shaders Nodes</a>
      <ul>
        <li><a href="#tool"><code>@tool</code></a></li>
        <li><a href="#visualshadernodeperlinnoise3d"><code>VisualShaderNodePerlinNoise3D</code></a></li>
        <li><a href="#_get_name"><code>_get_name()</code></a></li>
        <li><a href="#_get_description"><code>_get_description()</code></a></li>
        <li><a href="#_init"><code>_init()</code></a></li>
        <li><a href="#_get_return_icon_type"><code>_get_return_icon_type()</code></a></li>
        <li><a href="#_get_input_port_count"><code>_get_input_port_count()</code></a></li>
        <li><a href="#_get_input_port_name"><code>_get_input_port_name()</code></a></li>
        <li><a href="#_get_input_port_type"><code>_get_input_port_type()</code></a></li>
        <li><a href="#_get_output_port_count"><code>_get_output_port_count()</code></a></li>
        <li><a href="#_get_output_port_name"><code>_get_output_port_name()</code></a></li>
        <li><a href="#_get_output_port_type"><code>_get_output_port_type()</code></a></li>
        <li><a href="#_get_global_code"><code>_get_global_code()</code></a></li>
        <li><a href="#_get_code"><code>_get_code()</code></a></li>
      </ul>
    </li>
    <li><a href="#how-to-add-visual-shader-nodes-in-c">How to add Visual Shader Nodes in C++</a>
      <ul>
        <li><a href="#visual_shader_nodesh"><code>visual_shader_nodes.h</code></a></li>
        <li><a href="#visual_shader_nodescpp"><code>visual_shader_nodes.cpp</code></a></li>
        <li><a href="#register_scene_typescpp"><code>register_scene_types.cpp</code></a></li>
        <li><a href="#visual_shader_editor_plugincpp"><code>visual_shader_editor_plugin.cpp</code></a></li>
      </ul>
    </li>
    <li><a href="#compiling-godot-from-source">Compiling Godot from source</a></li>
    <li><a href="#using-the-custom-visual-shader-node">Using the custom Visual Shader Node</a></li>
  </ul>
</nav>
            </details><div class="page-content">
                <p><img src="Cover-Godot-VS-Contribution.png" alt="Contributing Visual Shaders to Godot - Cover"></p>
<blockquote>
<p>📝 The changed Godot icon was made by <a href="https://github.com/YuriSizov/godot-emotes/blob/master/LICENSE">Yuri Sizov (CC-BY 4.0)</a></p>
</blockquote>
<h2 id="introduction">Introduction</h2>
<p>If you have ever wondered how (some) new features are getting added to each new iteration of the Godot Engine, you&rsquo;ve come to the right place! In this post I will explain how you can add Visual Shader Nodes to the core engine <a href="https://github.com/godotengine/godot/pull/64248">as I have</a> and get a little insight of the Godot source code.</p>
<h2 id="the-structure-of-visual-shaders-nodes">The structure of Visual Shaders Nodes</h2>
<p>To understand how Visual Shader Nodes can be written in C++ (even if you have almost no knowledge about C++) we need to have look at how you can create new Nodes in GDScript as addons/tool scripts. There is a <a href="https://docs.godotengine.org/en/stable/tutorials/plugins/editor/visual_shader_plugins.html">section about this in the docs</a>, so let&rsquo;s take a deep-dive into the code:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-gdscript" data-lang="gdscript"><span class="line"><span class="cl"><span class="err">©</span> <span class="n">Copyright</span> <span class="mi">2014</span><span class="o">-</span><span class="n">present</span> <span class="n">Juan</span> <span class="n">Linietsky</span><span class="p">,</span> <span class="n">Ariel</span> <span class="n">Manzur</span> <span class="ow">and</span> <span class="n">the</span> <span class="n">Godot</span> <span class="n">community</span> <span class="p">(</span><span class="n">CC</span> <span class="n">BY</span> <span class="mf">3.0</span><span class="p">)</span><span class="o">.</span> <span class="n">Revision</span> <span class="n">c93d9373</span><span class="o">.</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># PerlinNoise3D.gd</span>
</span></span><span class="line"><span class="cl"><span class="err">@</span><span class="k">tool</span>
</span></span><span class="line"><span class="cl"><span class="k">extends</span> <span class="n">VisualShaderNodeCustom</span>
</span></span><span class="line"><span class="cl"><span class="n">class_name</span> <span class="n">VisualShaderNodePerlinNoise3D</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">func</span> <span class="n">_get_name</span><span class="p">():</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="s2">&#34;PerlinNoise3D&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">func</span> <span class="n">_get_category</span><span class="p">():</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="s2">&#34;MyShaderNodes&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">func</span> <span class="n">_get_description</span><span class="p">():</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="s2">&#34;Classic Perlin-Noise-3D function (by Curly-Brace)&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">func</span> <span class="n">_init</span><span class="p">():</span>
</span></span><span class="line"><span class="cl">    <span class="n">set_input_port_default_value</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">func</span> <span class="n">_get_return_icon_type</span><span class="p">():</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">VisualShaderNode</span><span class="o">.</span><span class="n">PORT_TYPE_SCALAR</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">func</span> <span class="n">_get_input_port_count</span><span class="p">():</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="mi">4</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">func</span> <span class="n">_get_input_port_name</span><span class="p">(</span><span class="n">port</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="n">match</span> <span class="n">port</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="mi">0</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span> <span class="s2">&#34;uv&#34;</span>
</span></span><span class="line"><span class="cl">        <span class="mi">1</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span> <span class="s2">&#34;offset&#34;</span>
</span></span><span class="line"><span class="cl">        <span class="mi">2</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span> <span class="s2">&#34;scale&#34;</span>
</span></span><span class="line"><span class="cl">        <span class="mi">3</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span> <span class="s2">&#34;time&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">func</span> <span class="n">_get_input_port_type</span><span class="p">(</span><span class="n">port</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="n">match</span> <span class="n">port</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="mi">0</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span> <span class="n">VisualShaderNode</span><span class="o">.</span><span class="n">PORT_TYPE_VECTOR_3D</span>
</span></span><span class="line"><span class="cl">        <span class="mi">1</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span> <span class="n">VisualShaderNode</span><span class="o">.</span><span class="n">PORT_TYPE_VECTOR_3D</span>
</span></span><span class="line"><span class="cl">        <span class="mi">2</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span> <span class="n">VisualShaderNode</span><span class="o">.</span><span class="n">PORT_TYPE_SCALAR</span>
</span></span><span class="line"><span class="cl">        <span class="mi">3</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span> <span class="n">VisualShaderNode</span><span class="o">.</span><span class="n">PORT_TYPE_SCALAR</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">func</span> <span class="n">_get_output_port_count</span><span class="p">():</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="mi">1</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">func</span> <span class="n">_get_output_port_name</span><span class="p">(</span><span class="n">port</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="s2">&#34;result&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">func</span> <span class="n">_get_output_port_type</span><span class="p">(</span><span class="n">port</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">VisualShaderNode</span><span class="o">.</span><span class="n">PORT_TYPE_SCALAR</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">func</span> <span class="n">_get_global_code</span><span class="p">(</span><span class="n">mode</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="s2">&#34;&#34;&#34;
</span></span></span><span class="line"><span class="cl"><span class="s2">        vec3 mod289_3(vec3 x) {
</span></span></span><span class="line"><span class="cl"><span class="s2">            return x - floor(x * (1.0 / 289.0)) * 289.0;
</span></span></span><span class="line"><span class="cl"><span class="s2">        }
</span></span></span><span class="line"><span class="cl"><span class="s2">
</span></span></span><span class="line"><span class="cl"><span class="s2">        vec4 mod289_4(vec4 x) {
</span></span></span><span class="line"><span class="cl"><span class="s2">            return x - floor(x * (1.0 / 289.0)) * 289.0;
</span></span></span><span class="line"><span class="cl"><span class="s2">        }
</span></span></span><span class="line"><span class="cl"><span class="s2">
</span></span></span><span class="line"><span class="cl"><span class="s2">        vec4 permute(vec4 x) {
</span></span></span><span class="line"><span class="cl"><span class="s2">            return mod289_4(((x * 34.0) + 1.0) * x);
</span></span></span><span class="line"><span class="cl"><span class="s2">        }
</span></span></span><span class="line"><span class="cl"><span class="s2">
</span></span></span><span class="line"><span class="cl"><span class="s2">        vec4 taylorInvSqrt(vec4 r) {
</span></span></span><span class="line"><span class="cl"><span class="s2">            return 1.79284291400159 - 0.85373472095314 * r;
</span></span></span><span class="line"><span class="cl"><span class="s2">        }
</span></span></span><span class="line"><span class="cl"><span class="s2">
</span></span></span><span class="line"><span class="cl"><span class="s2">        vec3 fade(vec3 t) {
</span></span></span><span class="line"><span class="cl"><span class="s2">            return t * t * t * (t * (t * 6.0 - 15.0) + 10.0);
</span></span></span><span class="line"><span class="cl"><span class="s2">        }
</span></span></span><span class="line"><span class="cl"><span class="s2">
</span></span></span><span class="line"><span class="cl"><span class="s2">        // Classic Perlin noise.
</span></span></span><span class="line"><span class="cl"><span class="s2">        float cnoise(vec3 P) {
</span></span></span><span class="line"><span class="cl"><span class="s2">            vec3 Pi0 = floor(P); // Integer part for indexing.
</span></span></span><span class="line"><span class="cl"><span class="s2">            vec3 Pi1 = Pi0 + vec3(1.0); // Integer part + 1.
</span></span></span><span class="line"><span class="cl"><span class="s2">            Pi0 = mod289_3(Pi0);
</span></span></span><span class="line"><span class="cl"><span class="s2">            Pi1 = mod289_3(Pi1);
</span></span></span><span class="line"><span class="cl"><span class="s2">            vec3 Pf0 = fract(P); // Fractional part for interpolation.
</span></span></span><span class="line"><span class="cl"><span class="s2">            vec3 Pf1 = Pf0 - vec3(1.0); // Fractional part - 1.0.
</span></span></span><span class="line"><span class="cl"><span class="s2">            vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);
</span></span></span><span class="line"><span class="cl"><span class="s2">            vec4 iy = vec4(Pi0.yy, Pi1.yy);
</span></span></span><span class="line"><span class="cl"><span class="s2">            vec4 iz0 = vec4(Pi0.z);
</span></span></span><span class="line"><span class="cl"><span class="s2">            vec4 iz1 = vec4(Pi1.z);
</span></span></span><span class="line"><span class="cl"><span class="s2">
</span></span></span><span class="line"><span class="cl"><span class="s2">            vec4 ixy = permute(permute(ix) + iy);
</span></span></span><span class="line"><span class="cl"><span class="s2">            vec4 ixy0 = permute(ixy + iz0);
</span></span></span><span class="line"><span class="cl"><span class="s2">            vec4 ixy1 = permute(ixy + iz1);
</span></span></span><span class="line"><span class="cl"><span class="s2">
</span></span></span><span class="line"><span class="cl"><span class="s2">            vec4 gx0 = ixy0 * (1.0 / 7.0);
</span></span></span><span class="line"><span class="cl"><span class="s2">            vec4 gy0 = fract(floor(gx0) * (1.0 / 7.0)) - 0.5;
</span></span></span><span class="line"><span class="cl"><span class="s2">            gx0 = fract(gx0);
</span></span></span><span class="line"><span class="cl"><span class="s2">            vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);
</span></span></span><span class="line"><span class="cl"><span class="s2">            vec4 sz0 = step(gz0, vec4(0.0));
</span></span></span><span class="line"><span class="cl"><span class="s2">            gx0 -= sz0 * (step(0.0, gx0) - 0.5);
</span></span></span><span class="line"><span class="cl"><span class="s2">            gy0 -= sz0 * (step(0.0, gy0) - 0.5);
</span></span></span><span class="line"><span class="cl"><span class="s2">
</span></span></span><span class="line"><span class="cl"><span class="s2">            vec4 gx1 = ixy1 * (1.0 / 7.0);
</span></span></span><span class="line"><span class="cl"><span class="s2">            vec4 gy1 = fract(floor(gx1) * (1.0 / 7.0)) - 0.5;
</span></span></span><span class="line"><span class="cl"><span class="s2">            gx1 = fract(gx1);
</span></span></span><span class="line"><span class="cl"><span class="s2">            vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);
</span></span></span><span class="line"><span class="cl"><span class="s2">            vec4 sz1 = step(gz1, vec4(0.0));
</span></span></span><span class="line"><span class="cl"><span class="s2">            gx1 -= sz1 * (step(0.0, gx1) - 0.5);
</span></span></span><span class="line"><span class="cl"><span class="s2">            gy1 -= sz1 * (step(0.0, gy1) - 0.5);
</span></span></span><span class="line"><span class="cl"><span class="s2">
</span></span></span><span class="line"><span class="cl"><span class="s2">            vec3 g000 = vec3(gx0.x, gy0.x, gz0.x);
</span></span></span><span class="line"><span class="cl"><span class="s2">            vec3 g100 = vec3(gx0.y, gy0.y, gz0.y);
</span></span></span><span class="line"><span class="cl"><span class="s2">            vec3 g010 = vec3(gx0.z, gy0.z, gz0.z);
</span></span></span><span class="line"><span class="cl"><span class="s2">            vec3 g110 = vec3(gx0.w, gy0.w, gz0.w);
</span></span></span><span class="line"><span class="cl"><span class="s2">            vec3 g001 = vec3(gx1.x, gy1.x, gz1.x);
</span></span></span><span class="line"><span class="cl"><span class="s2">            vec3 g101 = vec3(gx1.y, gy1.y, gz1.y);
</span></span></span><span class="line"><span class="cl"><span class="s2">            vec3 g011 = vec3(gx1.z, gy1.z, gz1.z);
</span></span></span><span class="line"><span class="cl"><span class="s2">            vec3 g111 = vec3(gx1.w, gy1.w, gz1.w);
</span></span></span><span class="line"><span class="cl"><span class="s2">
</span></span></span><span class="line"><span class="cl"><span class="s2">            vec4 norm0 = taylorInvSqrt(vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));
</span></span></span><span class="line"><span class="cl"><span class="s2">            g000 *= norm0.x;
</span></span></span><span class="line"><span class="cl"><span class="s2">            g010 *= norm0.y;
</span></span></span><span class="line"><span class="cl"><span class="s2">            g100 *= norm0.z;
</span></span></span><span class="line"><span class="cl"><span class="s2">            g110 *= norm0.w;
</span></span></span><span class="line"><span class="cl"><span class="s2">            vec4 norm1 = taylorInvSqrt(vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));
</span></span></span><span class="line"><span class="cl"><span class="s2">            g001 *= norm1.x;
</span></span></span><span class="line"><span class="cl"><span class="s2">            g011 *= norm1.y;
</span></span></span><span class="line"><span class="cl"><span class="s2">            g101 *= norm1.z;
</span></span></span><span class="line"><span class="cl"><span class="s2">            g111 *= norm1.w;
</span></span></span><span class="line"><span class="cl"><span class="s2">
</span></span></span><span class="line"><span class="cl"><span class="s2">            float n000 = dot(g000, Pf0);
</span></span></span><span class="line"><span class="cl"><span class="s2">            float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));
</span></span></span><span class="line"><span class="cl"><span class="s2">            float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));
</span></span></span><span class="line"><span class="cl"><span class="s2">            float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));
</span></span></span><span class="line"><span class="cl"><span class="s2">            float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));
</span></span></span><span class="line"><span class="cl"><span class="s2">            float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));
</span></span></span><span class="line"><span class="cl"><span class="s2">            float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));
</span></span></span><span class="line"><span class="cl"><span class="s2">            float n111 = dot(g111, Pf1);
</span></span></span><span class="line"><span class="cl"><span class="s2">
</span></span></span><span class="line"><span class="cl"><span class="s2">            vec3 fade_xyz = fade(Pf0);
</span></span></span><span class="line"><span class="cl"><span class="s2">            vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111), fade_xyz.z);
</span></span></span><span class="line"><span class="cl"><span class="s2">            vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);
</span></span></span><span class="line"><span class="cl"><span class="s2">            float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x);
</span></span></span><span class="line"><span class="cl"><span class="s2">            return 2.2 * n_xyz;
</span></span></span><span class="line"><span class="cl"><span class="s2">        }
</span></span></span><span class="line"><span class="cl"><span class="s2">    &#34;&#34;&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">func</span> <span class="n">_get_code</span><span class="p">(</span><span class="n">input_vars</span><span class="p">,</span> <span class="n">output_vars</span><span class="p">,</span> <span class="n">mode</span><span class="p">,</span> <span class="n">type</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">output_vars</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="s2">&#34; = cnoise(vec3((</span><span class="si">%s</span><span class="s2">.xy + </span><span class="si">%s</span><span class="s2">.xy) * </span><span class="si">%s</span><span class="s2">, </span><span class="si">%s</span><span class="s2">)) * 0.5 + 0.5;&#34;</span> <span class="o">%</span> <span class="p">[</span><span class="n">input_vars</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">input_vars</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">input_vars</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">input_vars</span><span class="p">[</span><span class="mi">3</span><span class="p">]]</span>
</span></span></code></pre></div><p>The meaning behind this can be read in the docs as well but here&rsquo;s a description for each used method so you don&rsquo;t have to look it up yourself:</p>
<p><img src="VisualShaderNodeAufbau.png" alt="Visual Shader Node - What is what"></p>
<h3 id="tool"><code>@tool</code></h3>
<p>Let&rsquo;s this script run in the editor itself instead of only in the running game.</p>
<h3 id="visualshadernodeperlinnoise3d"><code>VisualShaderNodePerlinNoise3D</code></h3>
<p>Creates a new class extending from <code>VisualShaderNodeCustom</code> via the <code>extends</code> keyboard in the prior line.</p>
<h3 id="_get_name"><code>_get_name()</code></h3>
<p>Sets the title of the Visual Shader Node.</p>
<h3 id="_get_description"><code>_get_description()</code></h3>
<p>Sets the description of the Visual Shader Node.</p>
<h3 id="_init"><code>_init()</code></h3>
<p>Sets default values for input ports.</p>
<h3 id="_get_return_icon_type"><code>_get_return_icon_type()</code></h3>
<p>Sets the icon type of the Visual Shader Node in the <code>Add Node</code> dialogue of the Visual Shader editor.</p>
<h3 id="_get_input_port_count"><code>_get_input_port_count()</code></h3>
<p>Sets the number of input ports of the Visual Shader Node.</p>
<h3 id="_get_input_port_name"><code>_get_input_port_name()</code></h3>
<p>Sets the Strings for the input ports of the Visual Shader Node.</p>
<h3 id="_get_input_port_type"><code>_get_input_port_type()</code></h3>
<p>Sets the type for the input port.</p>
<h3 id="_get_output_port_count"><code>_get_output_port_count()</code></h3>
<p>Sets the number of output ports.</p>
<h3 id="_get_output_port_name"><code>_get_output_port_name()</code></h3>
<p>Sets the String(s) of the output Node(s).</p>
<h3 id="_get_output_port_type"><code>_get_output_port_type()</code></h3>
<p>Sets the type of the output port of the Node.</p>
<h3 id="_get_global_code"><code>_get_global_code()</code></h3>
<p>Sets the global code which is added at the top of the generated written shader file.</p>
<h3 id="_get_code"><code>_get_code()</code></h3>
<p>Sets the code which is added inside the <code>vertex</code>, <code>fragment</code> or other function stage of the shader.</p>
<h2 id="how-to-add-visual-shader-nodes-in-c">How to add Visual Shader Nodes in C++</h2>
<p>Now that we have established how the syntax works in GDScript, let&rsquo;s have a look at the C++ side. Later on, we will create a simple example Node: a Node that only returns the UVs of a Mesh.</p>
<p>The files you need to change to create new Nodes are:</p>
<ul>
<li><code>scene/resources/visual_shader_nodes.cpp</code></li>
<li><code>scene/resources/visual_shader_nodes.h</code></li>
<li><code>scene/register_scene_types.cpp</code></li>
<li><code>editor/plugins/visual_shader_editor_plugin.cpp</code></li>
</ul>
<p>Let&rsquo;s start with the header file:</p>
<h3 id="visual_shader_nodesh"><code>visual_shader_nodes.h</code></h3>
<p>In the header file we define the general structure of the methods we want to use. Since we are merely inheriting the <code>VisualShaderNode</code>, there is mostly just the same code as in the other Visual Shader Nodes. It can however get more complicated (but that is for later).</p>
<p>If you scroll to the end of the file you will see either this or something similar:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="p">...</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">VisualShaderNodeRemap</span> <span class="o">:</span> <span class="k">public</span> <span class="n">VisualShaderNode</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="n">GDCLASS</span><span class="p">(</span><span class="n">VisualShaderNodeRemap</span><span class="p">,</span> <span class="n">VisualShaderNode</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">	<span class="k">virtual</span> <span class="n">String</span> <span class="n">get_caption</span><span class="p">()</span> <span class="k">const</span> <span class="k">override</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="k">virtual</span> <span class="kt">int</span> <span class="nf">get_input_port_count</span><span class="p">()</span> <span class="k">const</span> <span class="k">override</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="k">virtual</span> <span class="n">PortType</span> <span class="nf">get_input_port_type</span><span class="p">(</span><span class="kt">int</span> <span class="n">p_port</span><span class="p">)</span> <span class="k">const</span> <span class="k">override</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="k">virtual</span> <span class="n">String</span> <span class="nf">get_input_port_name</span><span class="p">(</span><span class="kt">int</span> <span class="n">p_port</span><span class="p">)</span> <span class="k">const</span> <span class="k">override</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="k">virtual</span> <span class="kt">int</span> <span class="nf">get_output_port_count</span><span class="p">()</span> <span class="k">const</span> <span class="k">override</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="k">virtual</span> <span class="n">PortType</span> <span class="nf">get_output_port_type</span><span class="p">(</span><span class="kt">int</span> <span class="n">p_port</span><span class="p">)</span> <span class="k">const</span> <span class="k">override</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="k">virtual</span> <span class="n">String</span> <span class="nf">get_output_port_name</span><span class="p">(</span><span class="kt">int</span> <span class="n">p_port</span><span class="p">)</span> <span class="k">const</span> <span class="k">override</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="k">virtual</span> <span class="n">String</span> <span class="nf">generate_code</span><span class="p">(</span><span class="n">Shader</span><span class="o">::</span><span class="n">Mode</span> <span class="n">p_mode</span><span class="p">,</span> <span class="n">VisualShader</span><span class="o">::</span><span class="n">Type</span> <span class="n">p_type</span><span class="p">,</span> <span class="kt">int</span> <span class="n">p_id</span><span class="p">,</span> <span class="k">const</span> <span class="n">String</span> <span class="o">*</span><span class="n">p_input_vars</span><span class="p">,</span> <span class="k">const</span> <span class="n">String</span> <span class="o">*</span><span class="n">p_output_vars</span><span class="p">,</span> <span class="kt">bool</span> <span class="n">p_for_preview</span> <span class="o">=</span> <span class="nb">false</span><span class="p">)</span> <span class="k">const</span> <span class="k">override</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="n">VisualShaderNodeRemap</span><span class="p">();</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="cp">#endif </span><span class="c1">// VISUAL_SHADER_NODES_H
</span></span></span></code></pre></div><p>This is the part I&rsquo;ve written for one my PRs for the Visual Shader system. You might recognize some functions from their GDScript equivalent and will notice that the differences are only limited to some typical C++ syntax keywords like <code>virtual</code>, <code>const</code> or <code>override</code>. But don&rsquo;t let these words intimidate you. Let&rsquo;s first have a detailed look at the unfamiliar methods:</p>
<h4 id="gdclass"><code>GDCLASS()</code></h4>
<p>This macro (C++ term for a sort-of function that let&rsquo;s you shorten code among other advantages) uses the underlying ClassDB system to create the class entry so Godot knows that this class exists.</p>
<h4 id="get_caption"><code>get_caption()</code></h4>
<p>Sets the title of the Visual Shader Node. C++ equivalent of <code>_get_name()</code>.</p>
<h4 id="visualshadernoderemap"><code>VisualShaderNodeRemap()</code></h4>
<p>This is the constructor method of your class. In this method we will also set the default values just like in GDScript&rsquo;s <code>_init()</code> method.</p>
<h3 id="visual_shader_nodescpp"><code>visual_shader_nodes.cpp</code></h3>
<p>The C++ part of the new Node is also built similarly to the GDScript side with some minor differences. Here is the code:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="n">String</span> <span class="n">VisualShaderNodeRemap</span><span class="o">::</span><span class="n">get_caption</span><span class="p">()</span> <span class="k">const</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="k">return</span> <span class="s">&#34;Remap&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="n">VisualShaderNodeRemap</span><span class="o">::</span><span class="n">get_input_port_count</span><span class="p">()</span> <span class="k">const</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="k">return</span> <span class="mi">5</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">VisualShaderNodeRemap</span><span class="o">::</span><span class="n">PortType</span> <span class="n">VisualShaderNodeRemap</span><span class="o">::</span><span class="n">get_input_port_type</span><span class="p">(</span><span class="kt">int</span> <span class="n">p_port</span><span class="p">)</span> <span class="k">const</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="k">switch</span> <span class="p">(</span><span class="n">p_port</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="k">case</span> <span class="mi">0</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">			<span class="k">return</span> <span class="n">PORT_TYPE_SCALAR</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">		<span class="k">case</span> <span class="mi">1</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">			<span class="k">return</span> <span class="n">PORT_TYPE_SCALAR</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">		<span class="k">case</span> <span class="mi">2</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">			<span class="k">return</span> <span class="n">PORT_TYPE_SCALAR</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">		<span class="k">case</span> <span class="mi">3</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">			<span class="k">return</span> <span class="n">PORT_TYPE_SCALAR</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">		<span class="k">case</span> <span class="mi">4</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">			<span class="k">return</span> <span class="n">PORT_TYPE_SCALAR</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">		<span class="k">default</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">			<span class="k">break</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="k">return</span> <span class="n">PORT_TYPE_SCALAR</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">String</span> <span class="n">VisualShaderNodeRemap</span><span class="o">::</span><span class="n">get_input_port_name</span><span class="p">(</span><span class="kt">int</span> <span class="n">p_port</span><span class="p">)</span> <span class="k">const</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="k">switch</span> <span class="p">(</span><span class="n">p_port</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="k">case</span> <span class="mi">0</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">			<span class="k">return</span> <span class="s">&#34;value&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">		<span class="k">case</span> <span class="mi">1</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">			<span class="k">return</span> <span class="s">&#34;input min&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">		<span class="k">case</span> <span class="mi">2</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">			<span class="k">return</span> <span class="s">&#34;input max&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">		<span class="k">case</span> <span class="mi">3</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">			<span class="k">return</span> <span class="s">&#34;output min&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">		<span class="k">case</span> <span class="mi">4</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">			<span class="k">return</span> <span class="s">&#34;output max&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">		<span class="k">default</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">			<span class="k">break</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="k">return</span> <span class="s">&#34;&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="n">VisualShaderNodeRemap</span><span class="o">::</span><span class="n">get_output_port_count</span><span class="p">()</span> <span class="k">const</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="k">return</span> <span class="mi">1</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">VisualShaderNodeRemap</span><span class="o">::</span><span class="n">PortType</span> <span class="n">VisualShaderNodeRemap</span><span class="o">::</span><span class="n">get_output_port_type</span><span class="p">(</span><span class="kt">int</span> <span class="n">p_port</span><span class="p">)</span> <span class="k">const</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="k">return</span> <span class="n">PORT_TYPE_SCALAR</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">String</span> <span class="n">VisualShaderNodeRemap</span><span class="o">::</span><span class="n">get_output_port_name</span><span class="p">(</span><span class="kt">int</span> <span class="n">p_port</span><span class="p">)</span> <span class="k">const</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="k">return</span> <span class="s">&#34;value&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">String</span> <span class="n">VisualShaderNodeRemap</span><span class="o">::</span><span class="n">generate_code</span><span class="p">(</span><span class="n">Shader</span><span class="o">::</span><span class="n">Mode</span> <span class="n">p_mode</span><span class="p">,</span> <span class="n">VisualShader</span><span class="o">::</span><span class="n">Type</span> <span class="n">p_type</span><span class="p">,</span> <span class="kt">int</span> <span class="n">p_id</span><span class="p">,</span> <span class="k">const</span> <span class="n">String</span> <span class="o">*</span><span class="n">p_input_vars</span><span class="p">,</span> <span class="k">const</span> <span class="n">String</span> <span class="o">*</span><span class="n">p_output_vars</span><span class="p">,</span> <span class="kt">bool</span> <span class="n">p_for_preview</span><span class="p">)</span> <span class="k">const</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="n">String</span> <span class="n">code</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="n">code</span> <span class="o">+=</span> <span class="s">&#34;	{</span><span class="se">\n</span><span class="s">&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="n">code</span> <span class="o">+=</span> <span class="n">vformat</span><span class="p">(</span><span class="s">&#34;		float __input_range = %s - %s;</span><span class="se">\n</span><span class="s">&#34;</span><span class="p">,</span> <span class="n">p_input_vars</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">p_input_vars</span><span class="p">[</span><span class="mi">1</span><span class="p">]);</span>
</span></span><span class="line"><span class="cl">	<span class="n">code</span> <span class="o">+=</span> <span class="n">vformat</span><span class="p">(</span><span class="s">&#34;		float __output_range = %s - %s;</span><span class="se">\n</span><span class="s">&#34;</span><span class="p">,</span> <span class="n">p_input_vars</span><span class="p">[</span><span class="mi">4</span><span class="p">],</span> <span class="n">p_input_vars</span><span class="p">[</span><span class="mi">3</span><span class="p">]);</span>
</span></span><span class="line"><span class="cl">	<span class="n">code</span> <span class="o">+=</span> <span class="n">vformat</span><span class="p">(</span><span class="s">&#34;		%s = %s + __output_range * ((%s - %s) / __input_range);</span><span class="se">\n</span><span class="s">&#34;</span><span class="p">,</span> <span class="n">p_output_vars</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">p_input_vars</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span> <span class="n">p_input_vars</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">p_input_vars</span><span class="p">[</span><span class="mi">1</span><span class="p">]);</span>
</span></span><span class="line"><span class="cl">	<span class="n">code</span> <span class="o">+=</span> <span class="s">&#34;	}</span><span class="se">\n</span><span class="s">&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="k">return</span> <span class="n">code</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">VisualShaderNodeRemap</span><span class="o">::</span><span class="n">VisualShaderNodeRemap</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="n">set_input_port_default_value</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">	<span class="n">set_input_port_default_value</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">	<span class="n">set_input_port_default_value</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">	<span class="n">set_input_port_default_value</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="n">simple_decl</span> <span class="o">=</span> <span class="nb">false</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><p>In the first method we set the title String for the node. Here, we call it <code>Remap</code>. Notice how you write the syntax for methods in C++:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="n">ReturnType</span> <span class="n">ClassName</span><span class="o">::</span><span class="n">MethodName</span><span class="p">()</span> <span class="n">additionalKeyword</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><p>The <code>const</code> keyword in the context of a class method means that the object it is called upon doesn&rsquo;t change. Just like this, we also write the <code>get_input_port_count()</code> method but with an <code>int</code> as a return type. The <code>override</code> keyword can be used on virtual functions to - as the name suggests - override their behaviour and functionality. The base function has to be virtual first.</p>
<p>In the third method <code>get_input_port_type()</code> we encounter the parameter <code>int p_port</code>. In the Godot source code you will encounter more examples of this type of function parameter namings. With this, it is easier to spot which is in fact a parameter variable passed down and which isn&rsquo;t. This comes in handy when there is more complex functionality programmed into a function.</p>
<p>The return values here are just like in GDScript e.g. <code>PORT_TYPE_SCALAR</code> and <code>PORT_TYPE_VECTOR_3D</code>. Other than also having a differnt keyword for switch statements (<code>switch</code> in C++ and <code>match</code> in GDScript), you have to return a default value in C++ outside of the switch statement.</p>
<p>Every method after that except <code>generate_code()</code> and <code>VisualShaderNodeRemap()</code> falls under the already described rules so I won&rsquo;t go into them anymore.</p>
<p>Now for the <code>generate_code</code> method:
Notice how many parameters there are:</p>
<pre tabindex="0"><code>Shader::Mode p_mode, VisualShader::Type p_type, int p_id, const String *p_input_vars, const String *p_output_vars, bool p_for_preview
</code></pre><p>You CAN use them but don&rsquo;t have to. They enable you to write more complex shader code depending on many factors. As this method&rsquo;s name suggests, it generates the underlying shader code for the Visual Shader Node. For instance the shader code can be completely different between a CanvasItem Shader and a Spatial Shader. But having to write two different kind of variants would be cumbersome and some repeated lines of code.</p>
<p><code>Shader::Mode</code> is the Shader type so for instance Spatial or CanvasItem Shader. <code>VisualShader::Type</code> is the specific Shader stage e.g. the <code>vertex()</code> or <code>fragment()</code> function. The <code>p_id</code> is the ID of the Node itself. This is hardly/never used as far as I know. The pointers for the input variables and output variables are used to format the Strings and fill in the values. The <code>p_for_preview</code> sets which output is used for previewing. The standard behaviour is that it picks the first output.</p>
<p>The body of the method creates a String called <code>code</code> and then uses the <code>vformat()</code> function to fill the values of the input variables and output variables into the String.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="n">String</span> <span class="n">code</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="n">code</span> <span class="o">+=</span> <span class="s">&#34;	{</span><span class="se">\n</span><span class="s">&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="n">code</span> <span class="o">+=</span> <span class="n">vformat</span><span class="p">(</span><span class="s">&#34;		float __input_range = %s - %s;</span><span class="se">\n</span><span class="s">&#34;</span><span class="p">,</span> <span class="n">p_input_vars</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">p_input_vars</span><span class="p">[</span><span class="mi">1</span><span class="p">]);</span>
</span></span><span class="line"><span class="cl"><span class="n">code</span> <span class="o">+=</span> <span class="n">vformat</span><span class="p">(</span><span class="s">&#34;		float __output_range = %s - %s;</span><span class="se">\n</span><span class="s">&#34;</span><span class="p">,</span> <span class="n">p_input_vars</span><span class="p">[</span><span class="mi">4</span><span class="p">],</span> <span class="n">p_input_vars</span><span class="p">[</span><span class="mi">3</span><span class="p">]);</span>
</span></span><span class="line"><span class="cl"><span class="n">code</span> <span class="o">+=</span> <span class="n">vformat</span><span class="p">(</span><span class="s">&#34;		%s = %s + __output_range * ((%s - %s) / __input_range);</span><span class="se">\n</span><span class="s">&#34;</span><span class="p">,</span> <span class="n">p_output_vars</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">p_input_vars</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span> <span class="n">p_input_vars</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">p_input_vars</span><span class="p">[</span><span class="mi">1</span><span class="p">]);</span>
</span></span><span class="line"><span class="cl"><span class="n">code</span> <span class="o">+=</span> <span class="s">&#34;	}</span><span class="se">\n</span><span class="s">&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="k">return</span> <span class="n">code</span><span class="p">;</span>
</span></span></code></pre></div><p>To write the shader content to the String we write each line as a seperate String embedded in the <code>vformat</code> function and add this String to the <code>code</code> String.</p>
<p>The syntax for the <code>vformat</code> function is as follows:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="n">vformat</span><span class="p">(</span><span class="s">&#34;		%s&#34;</span><span class="p">,</span> <span class="n">Variable</span><span class="p">);</span>
</span></span></code></pre></div><p>The <code>%s</code> sets the space where the variable is supposed to be pasted in. If there are several <code>%s</code> present, the order of the additional parameters behind the String is parsed through for each item to be replaced.</p>
<blockquote>
<p>📝 To prevent variable conflicts in the generated shader file we put <code>{ }</code> around the Node&rsquo;s Shader String.</p>
</blockquote>
<p>After we write each line, we <code>return</code> the String back.</p>
<p>Now for the <code>VisualShaderNodeRemap</code> method there is not much to say except that you can set the default input values. The boolean <code>simple_decl</code> can be set for simple Nodes that only need one line of code. It can be set optionally.</p>
<blockquote>
<p>📝 If you use it, you don&rsquo;t need to put <code>{}</code> around your shader code then (see the example below).</p>
</blockquote>
<h3 id="register_scene_typescpp"><code>register_scene_types.cpp</code></h3>
<p>The file itself is gigantic so search for <code>Remap</code> to find a line like this:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="n">GDREGISTER_CLASS</span><span class="p">(</span><span class="n">VisualShaderNodeRemap</span><span class="p">);</span>
</span></span></code></pre></div><p>This method registers your class so you can use it in GDScript and built on top of it (if you so choose).</p>
<h3 id="visual_shader_editor_plugincpp"><code>visual_shader_editor_plugin.cpp</code></h3>
<p>This file is also huge so search this time for <code>VisualShaderNodeRemap</code> to find a line like this:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="n">add_options</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">AddOption</span><span class="p">(</span><span class="s">&#34;Remap&#34;</span><span class="p">,</span> <span class="s">&#34;Utility&#34;</span><span class="p">,</span> <span class="s">&#34;VisualShaderNodeRemap&#34;</span><span class="p">,</span> <span class="n">TTR</span><span class="p">(</span><span class="s">&#34;Remaps a given input from the input range to the output range.&#34;</span><span class="p">),</span> <span class="p">{},</span> <span class="n">VisualShaderNode</span><span class="o">::</span><span class="n">PORT_TYPE_SCALAR</span><span class="p">));</span>
</span></span></code></pre></div><p>This function adds the details about the correct category of the Node, the class it uses, the documentation String which is being shown if you search in the Editor Docs (<kbd>F1</kbd>). If you have specific variants of your Node that changes depending on a dropdown, you set the option variable inside the <code>{}</code>. An example for this is the <code>UVFunc</code> Node:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="n">add_options</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">AddOption</span><span class="p">(</span><span class="s">&#34;UVPanning&#34;</span><span class="p">,</span> <span class="s">&#34;Textures/Functions&#34;</span><span class="p">,</span> <span class="s">&#34;VisualShaderNodeUVFunc&#34;</span><span class="p">,</span> <span class="n">TTR</span><span class="p">(</span><span class="s">&#34;Apply panning function on texture coordinates.&#34;</span><span class="p">),</span> <span class="p">{</span> <span class="n">VisualShaderNodeUVFunc</span><span class="o">::</span><span class="n">FUNC_PANNING</span> <span class="p">},</span> <span class="n">VisualShaderNode</span><span class="o">::</span><span class="n">PORT_TYPE_VECTOR_2D</span><span class="p">));</span>
</span></span><span class="line"><span class="cl"><span class="n">add_options</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">AddOption</span><span class="p">(</span><span class="s">&#34;UVScaling&#34;</span><span class="p">,</span> <span class="s">&#34;Textures/Functions&#34;</span><span class="p">,</span> <span class="s">&#34;VisualShaderNodeUVFunc&#34;</span><span class="p">,</span> <span class="n">TTR</span><span class="p">(</span><span class="s">&#34;Apply scaling function on texture coordinates.&#34;</span><span class="p">),</span> <span class="p">{</span> <span class="n">VisualShaderNodeUVFunc</span><span class="o">::</span><span class="n">FUNC_SCALING</span> <span class="p">},</span> <span class="n">VisualShaderNode</span><span class="o">::</span><span class="n">PORT_TYPE_VECTOR_2D</span><span class="p">));</span>
</span></span></code></pre></div><p>This is it for the basics. Now let us write our very own Visual Shader Node to apply the knowledge we gathered. Let&rsquo;s keep it simple and write a Node that just returns the UVs. We will call it <code>TutorialUV</code> and put it in the category <code>Tutorial/UV</code>.</p>
<p>Here is the code for it:</p>
<h4 id="visual_shader_nodescpp-1">visual_shader_nodes.cpp</h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="n">String</span> <span class="n">VisualShaderNodeTutorialUV</span><span class="o">::</span><span class="n">get_caption</span><span class="p">()</span> <span class="k">const</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="k">return</span> <span class="s">&#34;TutorialUV&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="n">VisualShaderNodeTutorialUV</span><span class="o">::</span><span class="n">get_input_port_count</span><span class="p">()</span> <span class="k">const</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">VisualShaderNodeTutorialUV</span><span class="o">::</span><span class="n">PortType</span> <span class="n">VisualShaderNodeTutorialUV</span><span class="o">::</span><span class="n">get_input_port_type</span><span class="p">(</span><span class="kt">int</span> <span class="n">p_port</span><span class="p">)</span> <span class="k">const</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="k">return</span> <span class="n">PORT_TYPE_SCALAR</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">String</span> <span class="n">VisualShaderNodeTutorialUV</span><span class="o">::</span><span class="n">get_input_port_name</span><span class="p">(</span><span class="kt">int</span> <span class="n">p_port</span><span class="p">)</span> <span class="k">const</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="k">return</span> <span class="s">&#34;&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="n">VisualShaderNodeTutorialUV</span><span class="o">::</span><span class="n">get_output_port_count</span><span class="p">()</span> <span class="k">const</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="k">return</span> <span class="mi">1</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">VisualShaderNodeTutorialUV</span><span class="o">::</span><span class="n">PortType</span> <span class="n">VisualShaderNodeTutorialUV</span><span class="o">::</span><span class="n">get_output_port_type</span><span class="p">(</span><span class="kt">int</span> <span class="n">p_port</span><span class="p">)</span> <span class="k">const</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="k">return</span> <span class="n">PORT_TYPE_VECTOR_2D</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">String</span> <span class="n">VisualShaderNodeTutorialUV</span><span class="o">::</span><span class="n">get_output_port_name</span><span class="p">(</span><span class="kt">int</span> <span class="n">p_port</span><span class="p">)</span> <span class="k">const</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="k">return</span> <span class="s">&#34;TutorialUV&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">String</span> <span class="n">VisualShaderNodeTutorialUV</span><span class="o">::</span><span class="n">generate_code</span><span class="p">(</span><span class="n">Shader</span><span class="o">::</span><span class="n">Mode</span> <span class="n">p_mode</span><span class="p">,</span> <span class="n">VisualShader</span><span class="o">::</span><span class="n">Type</span> <span class="n">p_type</span><span class="p">,</span> <span class="kt">int</span> <span class="n">p_id</span><span class="p">,</span> <span class="k">const</span> <span class="n">String</span> <span class="o">*</span><span class="n">p_input_vars</span><span class="p">,</span> <span class="k">const</span> <span class="n">String</span> <span class="o">*</span><span class="n">p_output_vars</span><span class="p">,</span> <span class="kt">bool</span> <span class="n">p_for_preview</span><span class="p">)</span> <span class="k">const</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="n">String</span> <span class="n">code</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="n">code</span> <span class="o">+=</span> <span class="n">vformat</span><span class="p">(</span><span class="s">&#34;		%s = UV;</span><span class="se">\n</span><span class="s">&#34;</span><span class="p">,</span> <span class="n">p_output_vars</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>
</span></span><span class="line"><span class="cl">	<span class="k">return</span> <span class="n">code</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">VisualShaderNodeTutorialUV</span><span class="o">::</span><span class="n">VisualShaderNodeTutorialUV</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="n">simple_decl</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><h4 id="visual_shader_nodesh-1">visual_shader_nodes.h</h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">VisualShaderNodeTutorialUV</span> <span class="o">:</span> <span class="k">public</span> <span class="n">VisualShaderNode</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="n">GDCLASS</span><span class="p">(</span><span class="n">VisualShaderNodeTutorialUV</span><span class="p">,</span> <span class="n">VisualShaderNode</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">	<span class="k">virtual</span> <span class="n">String</span> <span class="n">get_caption</span><span class="p">()</span> <span class="k">const</span> <span class="k">override</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="k">virtual</span> <span class="kt">int</span> <span class="nf">get_input_port_count</span><span class="p">()</span> <span class="k">const</span> <span class="k">override</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="k">virtual</span> <span class="n">PortType</span> <span class="nf">get_input_port_type</span><span class="p">(</span><span class="kt">int</span> <span class="n">p_port</span><span class="p">)</span> <span class="k">const</span> <span class="k">override</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="k">virtual</span> <span class="n">String</span> <span class="nf">get_input_port_name</span><span class="p">(</span><span class="kt">int</span> <span class="n">p_port</span><span class="p">)</span> <span class="k">const</span> <span class="k">override</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="k">virtual</span> <span class="kt">int</span> <span class="nf">get_output_port_count</span><span class="p">()</span> <span class="k">const</span> <span class="k">override</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="k">virtual</span> <span class="n">PortType</span> <span class="nf">get_output_port_type</span><span class="p">(</span><span class="kt">int</span> <span class="n">p_port</span><span class="p">)</span> <span class="k">const</span> <span class="k">override</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="k">virtual</span> <span class="n">String</span> <span class="nf">get_output_port_name</span><span class="p">(</span><span class="kt">int</span> <span class="n">p_port</span><span class="p">)</span> <span class="k">const</span> <span class="k">override</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="k">virtual</span> <span class="n">String</span> <span class="nf">generate_code</span><span class="p">(</span><span class="n">Shader</span><span class="o">::</span><span class="n">Mode</span> <span class="n">p_mode</span><span class="p">,</span> <span class="n">VisualShader</span><span class="o">::</span><span class="n">Type</span> <span class="n">p_type</span><span class="p">,</span> <span class="kt">int</span> <span class="n">p_id</span><span class="p">,</span> <span class="k">const</span> <span class="n">String</span> <span class="o">*</span><span class="n">p_input_vars</span><span class="p">,</span> <span class="k">const</span> <span class="n">String</span> <span class="o">*</span><span class="n">p_output_vars</span><span class="p">,</span> <span class="kt">bool</span> <span class="n">p_for_preview</span> <span class="o">=</span> <span class="nb">false</span><span class="p">)</span> <span class="k">const</span> <span class="k">override</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="n">VisualShaderNodeTutorialUV</span><span class="p">();</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></div><h4 id="register_scene_typescpp-1">register_scene_types.cpp</h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="n">GDREGISTER_CLASS</span><span class="p">(</span><span class="n">VisualShaderNodeRemap</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="n">GDREGISTER_CLASS</span><span class="p">(</span><span class="n">VisualShaderNodeTutorialUV</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="n">GDREGISTER_ABSTRACT_CLASS</span><span class="p">(</span><span class="n">VisualShaderNodeVarying</span><span class="p">);</span>
</span></span></code></pre></div><h4 id="visual_shader_editor_plugincpp-1">visual_shader_editor_plugin.cpp</h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="n">add_options</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">AddOption</span><span class="p">(</span><span class="s">&#34;TutorialUV&#34;</span><span class="p">,</span> <span class="s">&#34;Tutorial/UV&#34;</span><span class="p">,</span> <span class="s">&#34;VisualShaderNodeTutorialUV&#34;</span><span class="p">,</span> <span class="n">TTR</span><span class="p">(</span><span class="s">&#34;This is a tutorial UV node to explain how to contribute to Godot&#39;s Visual Shader system.&#34;</span><span class="p">),</span> <span class="p">{},</span> <span class="n">VisualShaderNode</span><span class="o">::</span><span class="n">PORT_TYPE_VECTOR_2D</span><span class="p">,</span> <span class="n">TYPE_FLAGS_FRAGMENT</span><span class="p">,</span> <span class="n">Shader</span><span class="o">::</span><span class="n">MODE_SPATIAL</span><span class="p">));</span>
</span></span></code></pre></div><blockquote>
<p>📝 If you need to know where exactly I put the snippets, you can check out the <a href="https://github.com/godotengine/godot/commit/3fc4d12a2d5f4cd2d8ae3fff9e33fd45fe8c7a08">branch commit on GitHub</a>.</p>
</blockquote>
<h2 id="compiling-godot-from-source">Compiling Godot from source</h2>
<p>Before we can see the changes inside the editor we need to compile the Godot source code. To check how it is done for your Operating Systen (OS), please refer to the <a href="https://docs.godotengine.org/en/stable/contributing/development/compiling/index.html">official documentation</a>.</p>
<p>Since I am on Windows I will run</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">scons <span class="nv">platform</span><span class="o">=</span>windows
</span></span></code></pre></div><p>scons will automatically fill out details I haven&rsquo;t supplied such as the cores it will use (it will use <code>N-1</code>  of your available cores).</p>
<h2 id="using-the-custom-visual-shader-node">Using the custom Visual Shader Node</h2>
<p>Now that we have everything done, let&rsquo;s see how it looks like in the editor:</p>
<p><img src="TutorialUVAddNodeDialogue.png" alt="Create Shader Node Dialogue showcasing the Tutorial UV Node"></p>
<p><img src="TutorialUVShowcase.png" alt="Tutorial UV Node showcase inside the editor by using it on an example mesh"></p>
<p><strong>That&rsquo;s it! Congratulations!✨✨✨ You just created your own core Visual Shader Node! You also had a little look at how the internal structure of the engine works.</strong></p>
<p>If you liked this blog post, I would appreciate it if you can share it. In case you want to support my work you can support me on <a href="https://ko-fi.com/flamelizard">Ko-Fi</a>.</p>

            </div>
        </article></main>
</div>
<footer class="footer">
    <span class="footer_item"> </span>
    &nbsp;

    <div class="footer_social-icons">
<a href="https://github.com/Rinstaff" target="_blank" rel="noopener noreferrer me"
    title="Github">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
    stroke-linecap="round" stroke-linejoin="round">
    <path
        d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22">
    </path>
</svg>
</a>
<a href="https://tryhackme.com/p/AkaJora" target="_blank" rel="noopener noreferrer me"
    title="Tryhackme">
    <svg role="img" viewBox="0 0 24 24" fill="currentColor"  stroke-width="2" xmlns="http://www.w3.org/2000/svg"  stroke-linecap="round" stroke-linejoin="round">
    <path d="M10.7048 0c-3.164 0-5.8024 2.2853-6.3563 5.2914C2.0493 5.5007.242 7.4381.242 9.7912c0 2.4918 2.0276 4.5191 4.5195 4.5191h6.7616a.625.625 0 000-1.2497H4.7615c-1.8031 0-3.2698-1.467-3.2698-3.2694 0-1.803 1.4667-3.2696 3.2698-3.2696.6552 0 1.287.1925 1.8274.5576a.6252.6252 0 00.8677-.1676.6251.6251 0 00-.168-.8678c-.5105-.345-1.0806-.5756-1.679-.6895.5105-2.3438 2.6006-4.1046 5.0952-4.1046 2.6578 0 4.8555 1.9984 5.1739 4.571a4.489 4.489 0 00-.488.3043.625.625 0 00-.1412.8724.6256.6256 0 00.8729.1408c.5587-.4036 1.2197-.6166 1.9114-.6166 1.547 0 2.894 1.0973 3.203 2.6102a.6254.6254 0 00.7378.4865c.3378-.0689.556-.3992.4871-.7377-.428-2.091-2.2903-3.6087-4.428-3.6087-.3254 0-.6455.037-.9574.1042C16.5567 2.3282 13.8986 0 10.7048 0zm5.1918 10.6402c-.1805 0-.3345.0358-.462.1078a.913.913 0 00-.3124.2909c-.0803.1215-.139.2635-.1753.4261a2.3894 2.3894 0 00-.0535.5145c0 .1805.0178.3525.0535.5162.0363.1639.095.3075.1753.4312a.909.909 0 00.3124.2964c.1275.0732.2815.11.462.11.1806 0 .3343-.0368.4607-.11a.8974.8974 0 00.3086-.2964c.0792-.1237.1372-.2673.1728-.4312a2.3737 2.3737 0 00.0544-.5162c0-.1807-.018-.3523-.0543-.5145-.0357-.1626-.0937-.3046-.173-.4261a.901.901 0 00-.3085-.2909c-.1264-.072-.28-.1078-.4607-.1078zm6.4864 0c-.1806 0-.3347.0358-.4621.1078a.913.913 0 00-.3125.2909c-.0808.1215-.139.2635-.1753.4261a2.3894 2.3894 0 00-.0535.5145c0 .1805.0178.3525.0535.5162.0364.1639.0945.3075.1753.4312a.909.909 0 00.3125.2964c.1274.0732.2815.11.4621.11.1807 0 .334-.0368.4605-.11a.8974.8974 0 00.3086-.2964c.0793-.1237.1372-.2673.1729-.4312a2.3737 2.3737 0 00.0543-.5162c0-.1807-.018-.3523-.0543-.5145-.0357-.1626-.0936-.3046-.1729-.4261a.9011.9011 0 00-.3086-.2909c-.1265-.072-.2798-.1078-.4605-.1078zm-8.5372.0682l-.8407.6175.3141.4294.4762-.3678v1.8773h.603v-2.5564zm6.4863 0l-.8413.6175.3146.4294.4762-.3678v1.8773h.6031v-2.5564zm-4.4355.4442c.0797 0 .1438.0284.1932.0848.0493.0564.0874.1263.114.2093a1.312 1.312 0 01.0542.2691 2.803 2.803 0 01.014.2637c0 .0818-.0048.1712-.014.2689a1.3044 1.3044 0 01-.0543.2707c-.0265.083-.0646.1529-.1139.2093-.0494.0569-.1135.0852-.1932.0852-.0792 0-.1443-.0283-.1947-.0852-.051-.0564-.09-.1263-.1178-.2093a1.244 1.244 0 01-.0557-.2707 2.7355 2.7355 0 01-.0146-.269c0-.0792.0049-.167.0146-.2636a1.249 1.249 0 01.0557-.269c.0278-.0831.0668-.153.1178-.2094.0504-.0564.1155-.0848.1947-.0848zm6.4864 0c.0793 0 .1436.0284.193.0848.0493.0564.0874.1263.114.2093.0266.083.0444.1732.0543.2691.0092.0966.014.1844.014.2637a2.91 2.91 0 01-.014.2689 1.3176 1.3176 0 01-.0543.2707c-.0266.083-.0647.1529-.114.2093-.0494.0569-.1137.0852-.193.0852-.0791 0-.1444-.0283-.1948-.0852-.051-.0564-.09-.1263-.1176-.2093a1.2445 1.2445 0 01-.056-.2707 2.7355 2.7355 0 01-.0146-.269c0-.0792.0049-.167.0146-.2636a1.2484 1.2484 0 01.056-.269c.0276-.0831.0666-.153.1176-.2094.0504-.0564.1157-.0848.1948-.0848zm-2.1915 3.5112c-.1806 0-.3347.0364-.4621.108a.9076.9076 0 00-.3125.2913c-.0808.1215-.1387.263-.1751.4257a2.3826 2.3826 0 00-.0541.5143c0 .1806.0183.3525.0541.5164.0364.1639.0943.3075.1751.4316a.9092.9092 0 00.3125.2956c.1274.0738.2815.1102.4621.1102.1807 0 .3336-.0364.46-.1102a.8922.8922 0 00.3087-.2956c.0797-.124.1371-.2677.1735-.4316a2.3755 2.3755 0 00.0543-.5164c0-.1801-.018-.352-.0543-.5143-.0364-.1627-.0938-.3042-.1735-.4257a.8904.8904 0 00-.3088-.2913c-.1263-.0716-.2792-.108-.4599-.108zm-6.4016.0684l-.8413.6177.3143.4296.4765-.3684v1.8775h.6033v-2.5564zm2.1252 0l-.8413.6177.314.4296.4768-.3684v1.8775h.6033v-2.5564zm2.116 0l-.8407.6177.3135.4296.4768-.3684v1.8775h.603v-2.5564zm2.1604.4442c.0792 0 .1438.028.1932.085.0493.0565.0874.1265.114.2095.026.083.0444.1725.0537.2691.0097.096.0146.1839.0146.263 0 .082-.0049.1715-.0146.2691a1.3243 1.3243 0 01-.0537.2706c-.0266.083-.0647.153-.114.2095-.0494.0569-.114.085-.1932.085-.0797 0-.1441-.0281-.195-.085-.0506-.0565-.0898-.1265-.1174-.2095a1.2443 1.2443 0 01-.0558-.2706 2.6765 2.6765 0 01-.0146-.269c0-.0792.0048-.1671.0146-.263a1.2413 1.2413 0 01.0558-.2692c.0276-.083.0668-.153.1173-.2095.051-.057.1154-.085.1951-.085zm-6.7291 3.0723c-.1312 0-.243.0264-.3358.0785a.6615.6615 0 00-.2268.2111c-.0586.0885-.1009.1914-.127.3096a1.6979 1.6979 0 00-.0394.3732c0 .1313.013.2562.0394.375.0261.1188.0684.2235.127.313a.6535.6535 0 00.2268.2152c.0927.0532.2046.0797.3358.0797.1307 0 .2424-.0265.334-.0797a.6501.6501 0 00.2241-.2152c.0575-.0895.0996-.1942.1258-.313.026-.1188.039-.2437.039-.375 0-.1306-.013-.2555-.039-.3732-.0262-.1182-.0683-.2211-.1258-.3096a.658.658 0 00-.2241-.2111c-.0916-.0521-.2033-.0785-.334-.0785zm3.0859 0c-.1314 0-.243.0264-.3358.0785a.6612.6612 0 00-.2268.2111c-.0586.0885-.101.1914-.127.3096a1.6895 1.6895 0 00-.0394.3732c0 .1313.0128.2562.0394.375.026.1188.0684.2235.127.313a.6532.6532 0 00.2268.2152c.0927.0532.2044.0797.3358.0797.1307 0 .2423-.0265.334-.0797a.6496.6496 0 00.224-.2152c.0574-.0895.0993-.1942.1258-.313a1.7415 1.7415 0 00.039-.375 1.724 1.724 0 00-.039-.3732c-.0265-.1182-.0684-.2211-.1259-.3096a.6575.6575 0 00-.224-.2111c-.0916-.0521-.2032-.0785-.334-.0785zm5.1077 0c-.1312 0-.2428.0264-.3356.0785a.6612.6612 0 00-.2268.2111c-.0586.0885-.1008.1914-.127.3096a1.6977 1.6977 0 00-.0396.3732c0 .1313.0132.2562.0397.375.0261.1188.0683.2235.127.313a.6532.6532 0 00.2267.2152c.0928.0532.2044.0797.3356.0797.1307 0 .2426-.0265.3342-.0797a.6496.6496 0 00.224-.2152c.0575-.0895.0992-.1942.1259-.313.026-.1188.039-.2437.039-.375 0-.1306-.013-.2555-.039-.3732-.0267-.1182-.0684-.2211-.126-.3096a.6575.6575 0 00-.2239-.2111c-.0916-.0521-.2035-.0785-.3342-.0785zm-6.658.0498l-.611.4487.2279.3112.3462-.2669v1.3627h.4375v-1.8557zm3.0677 0l-.6106.4487.2282.3112.3462-.2669v1.3627h.4377v-1.8557zm5.1082 0l-.6109.4487.2285.3112.346-.2669v1.3627h.4377v-1.8557zm-9.7115.3228c.0575 0 .1041.0205.14.0612.0358.0412.0633.0917.0823.152a.9604.9604 0 01.0397.1952c.007.07.0102.134.0102.1915 0 .0597-.0031.1247-.0102.1952a.954.954 0 01-.0397.197c-.019.0602-.0465.1107-.0824.1519-.0358.0412-.0824.0612-.1399.0612-.058 0-.1053-.02-.1416-.0612-.037-.0412-.065-.0917-.0852-.152a.8863.8863 0 01-.0407-.1969 1.9609 1.9609 0 01-.0108-.1952c0-.0575.0037-.1215.0108-.1915a.893.893 0 01.0407-.1952c.0202-.0603.0483-.1108.0852-.152.0363-.0407.0836-.0612.1416-.0612zm3.0859 0c.0575 0 .1041.0205.14.0612a.421.421 0 01.0821.152.9392.9392 0 01.0397.1952c.007.07.0103.134.0103.1915 0 .0597-.0033.1247-.0103.1952a.9302.9302 0 01-.0397.197.4211.4211 0 01-.0822.1519c-.0358.0412-.0824.0612-.14.0612-.058 0-.1053-.02-.1417-.0612a.4192.4192 0 01-.085-.152.8458.8458 0 01-.0407-.1969 1.9645 1.9645 0 01-.011-.1952c0-.0575.004-.1215.011-.1915a.8487.8487 0 01.0407-.1952.4196.4196 0 01.085-.152c.0364-.0407.0837-.0612.1418-.0612zm5.1077 0c.0575 0 .1044.0205.1402.0612a.421.421 0 01.0822.152.9483.9483 0 01.0398.1952c.007.07.0102.134.0102.1915 0 .0597-.0032.1247-.0102.1952a.9427.9427 0 01-.0398.197.421.421 0 01-.0822.1519c-.0358.0412-.0827.0612-.1402.0612-.058 0-.1051-.02-.1415-.0612-.0368-.0412-.065-.0917-.0857-.152a.9503.9503 0 01-.04-.1969 1.9645 1.9645 0 01-.011-.1952c0-.0575.0039-.1215.011-.1915a.9589.9589 0 01.04-.1952c.0207-.0603.0489-.1108.0857-.152.0363-.0407.0835-.0612.1415-.0612zm-1.6842 1.8138c-.1312 0-.2428.0266-.3356.0787a.659.659 0 00-.2268.211c-.0586.0883-.1008.1914-.127.3097a1.7304 1.7304 0 00-.0396.3733c0 .1312.0137.256.0397.3746.026.119.0683.2237.127.3137a.656.656 0 00.2267.2148c.0928.0532.2044.0797.3356.0797.1307 0 .2426-.0265.3342-.0797a.6475.6475 0 00.224-.2148c.0576-.09.0998-.1948.1259-.3137.026-.1187.039-.2434.039-.3746 0-.1307-.013-.2557-.039-.3733-.0261-.1183-.0683-.2214-.126-.3098a.6504.6504 0 00-.2239-.2109c-.0916-.052-.2035-.0787-.3342-.0787zm3.0627 0c-.1313 0-.243.0266-.3358.0787a.6641.6641 0 00-.2268.211c-.0586.0883-.101.1914-.127.3097a1.7218 1.7218 0 00-.0394.3733c0 .1312.0134.256.0395.3746.026.119.0683.2237.1269.3137a.6609.6609 0 00.2268.2148c.0928.0532.2045.0797.3358.0797s.2424-.0265.334-.0797a.6475.6475 0 00.224-.2148c.0575-.09.1-.1948.1259-.3137a1.7398 1.7398 0 00.0396-.3746c0-.1307-.0135-.2557-.0396-.3733-.026-.1183-.0684-.2214-.126-.3098a.6504.6504 0 00-.2239-.2109c-.0916-.052-.2027-.0787-.334-.0787zm-1.5448.05l-.6109.448.2284.3124.346-.2675v1.3626h.4378v-1.8555zm-1.5179.3228c.0575 0 .1041.0206.14.0613a.4206.4206 0 01.0826.1517.9575.9575 0 01.0396.1953c.007.07.0102.134.0102.1916 0 .0597-.0032.1245-.0102.195a.9512.9512 0 01-.0396.197.4218.4218 0 01-.0826.1519c-.0359.0412-.0825.0612-.14.0612-.058 0-.1052-.02-.1415-.0612-.0368-.0412-.065-.0917-.085-.152a.9149.9149 0 01-.0408-.1969 1.9608 1.9608 0 01-.011-.195c0-.0575.004-.1217.011-.1916a.9232.9232 0 01.0407-.1953c.0202-.0603.0483-.1105.085-.1517.0364-.0407.0836-.0613.1416-.0613zm3.0627 0c.0575 0 .104.0206.1398.0613a.4208.4208 0 01.0826.1517.939.939 0 01.0394.1953c.0071.07.0104.134.0104.1916 0 .0597-.0033.1245-.0104.195a.9296.9296 0 01-.0394.197.4218.4218 0 01-.0826.1519c-.0357.0412-.0823.0612-.1398.0612-.0575 0-.1054-.02-.1417-.0612-.037-.0412-.065-.0917-.085-.152a.9065.9065 0 01-.0408-.1969 1.9495 1.9495 0 01-.0103-.195c0-.0575.0033-.1217.0103-.1916a.9145.9145 0 01.0407-.1953c.02-.0603.0481-.1105.085-.1517.0364-.0407.0843-.0613.1418-.0613zm-9.7123.1855c-.091 0-.1686.0182-.2326.0545a.4563.4563 0 00-.157.146c-.0408.0613-.0702.133-.0881.2149a1.1685 1.1685 0 00-.0271.2587c0 .0907.0086.1773.027.2598.018.082.0474.1546.0881.217a.4589.4589 0 00.157.1487c.064.037.1417.0557.2327.0557.0907 0 .1677-.0188.2311-.0557a.4504.4504 0 00.1558-.1487c.0402-.0624.0688-.135.0873-.217a1.2187 1.2187 0 00.0272-.2598c0-.0911-.0093-.1774-.0272-.2587-.0185-.082-.0471-.1536-.0873-.2148a.4479.4479 0 00-.1558-.146c-.0634-.0364-.1403-.0546-.231-.0546zm1.0519.0346l-.423.3102.1577.2166.2398-.185v.9442h.3037v-1.286zm-1.0519.2236c.0396 0 .0724.0141.0973.0429a.2841.2841 0 01.057.105.689.689 0 01.0276.1352c.0044.0489.007.0927.007.1328 0 .0407-.0027.0862-.007.135a.684.684 0 01-.0277.1362.2845.2845 0 01-.057.1053c-.0248.0288-.0576.043-.0972.043a.1247.1247 0 01-.098-.043.2976.2976 0 01-.0592-.1053.612.612 0 01-.0283-.1361 1.391 1.391 0 01-.0069-.135c0-.0402.0021-.084.007-.1329a.6197.6197 0 01.0282-.1353.2973.2973 0 01.0592-.105.1248.1248 0 01.098-.0428zm3.7749 1.394c-.0907 0-.1681.0178-.2321.0542a.4517.4517 0 00-.1574.1463c-.0407.0608-.07.1326-.088.2144a1.1691 1.1691 0 00-.0276.2587c0 .0905.0092.1774.0277.26.0179.0824.0472.1545.0879.2168a.4562.4562 0 00.1574.1493c.064.0368.1414.0547.232.0547.0912 0 .1683-.0179.2318-.0547a.451.451 0 00.1556-.1493.6636.6636 0 00.0868-.2169 1.1889 1.1889 0 00.0277-.26c0-.0906-.0092-.1773-.0277-.2586-.0179-.0818-.0473-.1536-.0868-.2144a.4461.4461 0 00-.1556-.1463c-.0635-.0364-.1406-.0543-.2317-.0543zm1.0522.034l-.423.3109.1578.2158.2398-.1849v.9444h.3033v-1.2861zm-1.0522.2236c.0401 0 .0726.014.0976.0427a.3008.3008 0 01.057.1054.6431.6431 0 01.027.135 1.31 1.31 0 01.0077.1329c0 .0412-.0027.0863-.0077.135a.655.655 0 01-.027.1367.3066.3066 0 01-.057.1054c-.025.0282-.0575.0421-.0976.0421-.0396 0-.0728-.0139-.0977-.042a.2928.2928 0 01-.0592-.1055.6182.6182 0 01-.028-.1366 1.3641 1.3641 0 01-.0077-.1351c0-.0401.0029-.0841.0077-.1328a.6122.6122 0 01.028-.135.2874.2874 0 01.0592-.1055c.0249-.0287.0581-.0427.0977-.0427z"/>
</svg>
</a>
<a href="https://t.me/Repeter_IB" target="_blank" rel="noopener noreferrer me"
    title="Telegram">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
    stroke-linecap="round" stroke-linejoin="round">
    <path
        d="M21.198 2.433a2.242 2.242 0 0 0-1.022.215l-8.609 3.33c-2.068.8-4.133 1.598-5.724 2.21a405.15 405.15 0 0 1-2.849 1.09c-.42.147-.99.332-1.473.901-.728.968.193 1.798.919 2.286 1.61.516 3.275 1.009 4.654 1.472.509 1.793.997 3.592 1.48 5.388.16.36.506.494.864.498l-.002.018s.281.028.555-.038a2.1 2.1 0 0 0 .933-.517c.345-.324 1.28-1.244 1.811-1.764l3.999 2.952.032.018s.442.311 1.09.355c.324.022.75-.04 1.116-.308.37-.27.613-.702.728-1.196.342-1.492 2.61-12.285 2.997-14.072l-.01.042c.27-1.006.17-1.928-.455-2.474a1.654 1.654 0 0 0-1.034-.407z" />
</svg>
</a>
<a href="https://t.me/Repeter_IB" target="_blank" rel="noopener noreferrer me"
    title="Ctftime">
    <svg version="1.0" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 220.000000 200.000000"
    preserveAspectRatio="xMidYMid meet">
    <g transform="translate(0.000000,200.000000) scale(0.100000,-0.100000)" fill="currentColor" stroke="none">
        <path d="M365 1499 c201 -275 365 -503 365 -507 0 -4 -84 -120 -188 -259 -103
            -139 -263 -355 -356 -480 -93 -125 -173 -229 -178 -231 -45 -19 101 -22 992
            -22 l1000 0 0 1000 0 1000 -1000 0 -999 0 364 -501z m1310 -509 l0 -305 -312
            -3 -313 -2 0 310 0 310 313 -2 312 -3 0 -305z" />
        <path d="M1150 1194 c0 -2 -1 -95 -1 -206 l0 -203 216 -3 215 -2 0 210 0 210
            -157 0 -158 0 98 -98 c53 -53 97 -101 97 -106 0 -4 -42 -48 -92 -97 l-93 -88
            -28 26 -27 27 65 66 65 66 -100 101 c-55 55 -100 99 -100 97z" />
    </g>
</svg>
</a>
</div>
    <small class="footer_copyright">
        © 2023 J0rik.
        <a href="https://gohugo.io" target="_blank" rel="noreferrer noopener">https://t.me/Repeter_IB</a>.
    </small>
</footer><a href="#" title="Go to top" id="totop">
    <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" fill="currentColor" stroke="currentColor" viewBox="0 96 960 960">
    <path d="M283 704.739 234.261 656 480 410.261 725.739 656 677 704.739l-197-197-197 197Z"/>
</svg>

</a>


    
    
    
    <script src="https://flagctfj0rik.github.io/js/script.min.46bd451490183d25f475c182f8fe773c1c787124cec75969e37c871d76aa151f.js" integrity="sha256-Rr1FFJAYPSX0dcGC&#43;P53PBx4cSTOx1lp43yHHXaqFR8="></script>

</body>
</html>
